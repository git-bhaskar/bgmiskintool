name: Build APK

on:
  push:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:

    - name: Checkout
      uses: actions/checkout@v3

    - name: Install dependencies
  run: |
    sudo apt update
    
    sudo apt install -y \
      zip unzip \
      openjdk-17-jdk \
      python3-pip \
      autoconf \
      automake \
      libtool \
      pkg-config \
      zlib1g-dev \
      libncurses5 \
      libncurses5-dev \
      libtinfo5 \
      cmake \
      build-essential
    
    pip install --upgrade pip
    pip install buildozer cython

    - name: Build APK
      run: |
        buildozer android debug
